{"version":3,"sources":["../../src/pages/mycart/mycart.module.ts","../../src/pages/mycart/mycart.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MycartPage } from './mycart';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MycartPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MycartPage),\r\n    ComponentsModule\r\n  ],\r\n})\r\nexport class MycartPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mycart/mycart.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, Events } from 'ionic-angular';\r\nimport { ToastProvider } from '../../providers/services/toast';\r\nimport { ServicesProvider } from '../../providers/services/services';\r\nimport { DataHandler } from '../../Datahandler/datahandler';\r\nimport { LoaderService } from '../../providers/services/loader';\r\nimport { AlertService } from '../../providers/services/alert_service';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-mycart',\r\n  templateUrl: 'mycart.html',\r\n})\r\nexport class MycartPage {\r\n  viewcart: any = [];\r\n  mobile: any;\r\n  total: number;\r\n  pattern: boolean;\r\n  isProduct: boolean = false;\r\n  viewcartlength: any;\r\n  cartCount: any;\r\n  orderId: any;\r\n  constructor(public navCtrl: NavController,public events: Events, public alert : AlertService, public loader:LoaderService, public toast : ToastProvider,public serviceHandler : ServicesProvider,\r\n    public alertCtrl: AlertController, public navParams: NavParams,public dataHandler :DataHandler) {\r\n      this.dataHandler.storage.get(\"mobile\").then(mobile => {\r\n        this.mobile = mobile;\r\n        this.viewCart();\r\n      })\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n\r\n  }\r\n  calculateTotalAmount() {\r\n    this.total = 0;\r\n    this.viewcart.forEach(product => {\r\n    this.total += parseFloat(product.price) * parseFloat(product.qty); \r\n  });\r\n}\r\n\r\n\r\n  getqty(product) {\r\n    var numpattern = new RegExp(\"^[1-9][0-9]*$\");\r\n    this.pattern = numpattern.test(product.qty);\r\n   if(this.pattern != false){\r\n    let data = {\r\n      userId:product.sku,\r\n      sku:product.sku,\r\n      mobile: this.mobile,\r\n      name:product.name,\r\n      qty:product.qty,\r\n      price:product.price,\r\n      image:product.image,\r\n      wholesaler: product.wholesaler\r\n  }\r\n    this.serviceHandler.Add_To_Cart(data).then(val =>{\r\n      this.loader.show();\r\n      this.viewCart();\r\n      this.calculateTotalAmount();\r\n      this.loader.hide();\r\n    })\r\n   }else{\r\n    this.toast.show('Please enter valid quantity ')\r\n   }\r\n}  \r\n\r\n  removecart(cart){\r\n    this.alert.showConfirm(\"Confirm Remove\",\"Are you sure you want to remove this item from cart?\",\"No\",\"Yes\")\r\n    .then(status => {\r\n      if (status) {\r\n        this.serviceHandler.Remove_Cart(cart._id).then(val =>{\r\n          // if(val['result'] != 402){\r\n            this.toast.show('Product is removed from your cart')\r\n            this.viewCart();\r\n            this.calculateTotalAmount();\r\n          // }\r\n        })\r\n      }\r\n    });\r\n    this.viewCart();\r\n  }\r\n\r\n  viewCart(){\r\n    this.serviceHandler.View_Cart(this.mobile).then(value =>{\r\n      if(value['code'] == 200){\r\n        this.viewcart = value['message'];\r\n        this.viewcartlength =  value['message'].length;\r\n        this.cartCount = this.viewcartlength;\r\n        this.events.publish(\"productCount:addCount\", this.cartCount, true);  \r\n        this.calculateTotalAmount();\r\n        this.isProduct = true;\r\n      }else{\r\n        if(value['code'] == 402){\r\n          this.cartCount = 0;\r\n          this.viewcart = []\r\n          this.events.publish(\"productCount:addCount\", this.cartCount, true);\r\n          this.isProduct = false;\r\n        }else{\r\n\r\n        }\r\n       \r\n      }\r\n    })\r\n  }\r\n  proceedCheckout(){\r\n    //adding grand total - bug - 4022 - Mythreyi\r\n    let data = {\r\n      userId:this.mobile,\r\n      mobile:this.mobile,\r\n      grandTotal:this.total,\r\n      order: this.viewcart\r\n    }\r\n    \r\n    this.serviceHandler.Place_Order(data).then(val =>{\r\n      if(val['code']== 200){\r\n        this.orderId = val['orderId'];\r\n        this.navCtrl.push('ThankyouPage',{orderID : this.orderId })\r\n      }else{\r\n\r\n      }\r\n    })\r\n    \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mycart/mycart.ts"],"sourceRoot":""}